---
title: ç·¨å¯«åœ°åœ–æ¨£å¼å®šç¾©åŠä½¿ç”¨ MapLibre GL JS æ¸²æŸ“åœ°åœ–
date: 2024-04-11 23:00:00
tags: ["çŸ­ç¯‡", "ç¨‹å¼", "é€²éš", "GIS"]
description: ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å€‘å»ºç«‹äº† Tiles Serverï¼Œé€™ç¯‡æ–‡ç« æ˜¯æœ¬ç³»åˆ—çš„æœ€å¾Œä¸€ç¯‡ï¼ŒæœƒæŠŠ MVT çš„çµæœåœ¨ç¶²é ä¸Šç¹ªè£½æˆåœ°åœ–ã€‚
authors: ivan
slug: 2024/04/11/render-mvt
image: ./gis_og.png
---
[ä¸Šä¸€ç¯‡æ–‡ç« ](../make-your-own-tile-servers/index.mdx)ä¸­ï¼Œæˆ‘å€‘å»ºç«‹äº† Tiles Serverï¼Œé€™ç¯‡æ–‡ç« æ˜¯æœ¬ç³»åˆ—çš„æœ€å¾Œä¸€ç¯‡ï¼ŒæœƒæŠŠ MVT çš„çµæœåœ¨ç¶²é ä¸Šç¹ªè£½æˆåœ°åœ–ã€‚

{/* truncate */}

## å‰ç½®æº–å‚™äº‹é …
1. æˆ‘å€‘éœ€è¦èƒ½æä¾› MVT çš„ API Serverï¼Œæ‚¨å¯ä»¥è‡ªè¡Œå»ºç«‹ï¼Œæˆ–æ˜¯æŒ‰ç…§[ä¸Šä¸€ç¯‡æ–‡ç« ](../make-your-own-tile-servers/index.mdx)çš„æŒ‡ç¤ºä¾†ä¸‹è¼‰ä¸¦éƒ¨å±¬ç¯„ä¾‹å°ˆæ¡ˆã€‚
2. [Maputnik](https://github.com/maplibre/maputnik)ï¼Œæˆ‘å€‘è¦ä½¿ç”¨å®ƒä¾†ç·¨è¼¯æ¨£å¼ï¼Œæ‚¨å¯ä»¥åƒè€ƒå®˜ç¶²ä¾†å®‰è£ï¼Œè‹¥èƒ½å·²ç¶“éƒ¨å±¬å¥½ç¯„ä¾‹å°ˆæ¡ˆï¼Œå®ƒå·²ç¶“åŒ…å«åœ¨å…¶ä¸­ï¼Œæ‚¨å¯ä»¥é–‹å•Ÿ[http://localhost:8888/](http://localhost:8888/)æŸ¥çœ‹å®ƒã€‚

## åŠ å…¥ Data Source
æœ‰äº†åœ°åœ–è³‡æ–™ä¹‹å¾Œï¼Œæˆ‘å€‘éœ€è¦ä¾†æ’°å¯«æ¨£å¼ï¼Œæœ‰é»åƒæ˜¯ CSSï¼Œä¾†å‘Šè¨´å®¢æˆ¶ç«¯è©²æ€éº¼ç¹ªè£½é€™äº›è³‡æ–™ã€‚
è«‹é–‹å•Ÿ Maputnik [http://localhost:8888/](http://localhost:8888/)ï¼Œé¸æ“‡ Open > Empty Styleï¼Œæˆ‘å€‘å¾é ­é–‹å§‹è£½ä½œ~
![](./screen-1.png)
æ¥è‘—ï¼Œé¸å‰‡ Data Sourceï¼ŒåŠ å…¥ Vector (XYZ URLs)ï¼ŒTile URL è«‹è¼¸å…¥ `http://localhost:3000/api/tiles/{z}/{x}/{y}.mvt` (æˆ–æ˜¯æ‚¨è‡ªå®šç¾©çš„ API Endpoint)ã€‚

## åŠ å…¥æµ·æ´‹åœ–å±¤
æˆ‘å€‘å…ˆä¾†ç¹ªè£½æµ·æ´‹ï¼ŒæŒ‰ä¸‹ Add Layerï¼ŒID = seaï¼ŒType = Fillï¼ŒSource = å‰›å‰›å»ºç«‹çš„ Sourceï¼ŒSource Layer = Waterã€‚
![](./screen-2.png)
æ‚¨å¯ä»¥æ”¹è®Š Paint properties ä¸­çš„ Color ä¾†è®“æµ·æ´‹å¡«å……ä¸åŒé¡è‰²ï¼Œç¹ªè£½å¥½æµ·æ´‹å¾Œï¼Œæ‚¨æ‡‰è©²å°±å¯ä»¥çœ‹åˆ°é™¸åœ°çš„è¼ªå»“äº†(ä¹Ÿå°±æ˜¯æ²’æœ‰è¢«ä¸Šè‰²çš„é‚£äº›å€åŸŸ)ã€‚
![](./screen-3.png)

## åŠ å…¥è¡Œæ”¿å€åŸŸ
æŒ‰ç…§ç›¸åŒæ–¹å¼ï¼Œæ‚¨å¯ä»¥åŠ å…¥è¡Œæ”¿å€åŸŸ ID = boundaryï¼Œ Type = Lineï¼ŒSource = å‰›å‰›å»ºç«‹çš„ Sourceï¼ŒSource Layer = boundaryã€‚
![](./screen-4.png)

æ¥è‘—æˆ‘å€‘æŠŠåŸå¸‚åç¨±ä¹Ÿç¹ªè£½ä¸Šå»ï¼Œå› ç‚ºè¦ç¹ªè£½ä¸­æ–‡çš„é—œä¿‚ï¼Œæˆ‘å€‘éœ€è¦æ”¯æ´çš„å­—å½¢ï¼Œè«‹æŒ‰ä¸‹ Style Settingsï¼Œè¨­å®š Glyphs URL ç‚º `http://fonts.openmaptiles.org/{fontstack}/{range}.pbf`

![](./screen-5.png)

åŠ å…¥æ–°çš„ Layerï¼ŒID = boundary_namesï¼Œ Type = Symbol ï¼ŒSource = å‰›å‰›å»ºç«‹çš„ Sourceï¼ŒSource Layer = boundaryã€‚ä¸¦æŠŠ Field è¨­å®šç‚º `{name}` é€™æ˜¯æˆ‘å€‘ Tile Serevr æä¾›çš„è³‡è¨Šï¼ŒFont è¨­å®šç‚º `Klokantech Noto Sans CJK Regular`ã€‚
![](./screen-6.png)

## åŠ å…¥é“è·¯
æœ€å¾Œæˆ‘å€‘ä¾†åŠ å…¥é“è·¯ï¼Œé“è·¯çš„ Layer ç‚º roadï¼ŒåŠ å…¥çš„æ–¹å¼å’Œè¡Œæ”¿å€åŸŸå¾ˆåƒï¼Œæ‚¨å¯ä»¥æŒ‰ç…§é“è·¯ç­‰ç´š(æˆ‘å€‘æŠŠç­‰ç´šè³‡è¨Šæ”¾åœ¨ `category` æ¬„ä½)ç¹ªè£½ä¸åŒé¡è‰²çš„åœ°åœ–ï¼Œä¹Ÿå¯ä»¥æ¨™è¨»ä¸Šé“è·¯åç¨±ã€‚

æ‚¨æ‡‰è©²å¯ä»¥å¾—åˆ°åƒé€™æ¨£çš„çµæœï¼
![](./screen-7.png)

æ‚¨ä¹Ÿå¯ä»¥åœ¨é€™è£¡[ä¸‹è¼‰](./goofy_blog_demo.json)æˆ‘åšçš„ç¯„ä¾‹ï¼Œç›´æ¥ Import åˆ° Maputnik ä¸­ã€‚

## åˆ©ç”¨ MapLibre GL JS åœ¨ç¶²é ä¸Šç¹ªè£½åœ°åœ–
[MapLibre GL JS](https://github.com/maplibre/maplibre-gl-js/)å¯ä»¥æ ¹æ“šæˆ‘å€‘å®šç¾©çš„ Style ä¾†åœ¨ç¶²é ä¸Šç¹ªè£½åœ°åœ–ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸åŒçš„ Renderer åœ¨å…¶ä»–è£ç½®åƒæ˜¯ iOS, Android ç­‰ç­‰ç¹ªè£½åœ°åœ–ï¼Œç›¸åŒçš„ Style å®šç¾©å¯ä»¥ç”¨åœ¨æ‰€æœ‰åœ°æ–¹ã€‚

æ‚¨å¯ä»¥ç›´æ¥æ‰“é–‹ç¯„ä¾‹å°ˆæ¡ˆä¸­çš„ [demo.html](https://github.com/mapbox/postgis-vt-util/blob/master/demo.html) ä¾†æŸ¥çœ‹çµæœã€‚

## Mapbox vs MapLibre
å…¶å¯¦å¾ˆå¤šæ¨™æº–å’Œå·¥å…·ç¨‹å¼åŸæœ¬éƒ½æ˜¯ç”± [Mapbox](https://github.com/mapbox) å®šç¾©å’Œæä¾›çš„ï¼Œä½†ä»–å€‘åœ¨å¹¾å¹´å‰æ±ºå®š[ä¿®æ”¹](https://github.com/mapbox/mapbox-gl-js/issues/10162)åŸæœ¬é–‹æºå°ˆæ¡ˆçš„æˆæ¬Šæ¢æ¬¾ï¼Œç¾åœ¨ä½¿ç”¨ Mapbox libraries æ˜¯éœ€è¦ Token çš„ï¼Œç¤¾ç¾¤æ–¼æ˜¯ Fork ä¸€å€‹ç‰ˆæœ¬(é‚„æ˜¯é–‹æºçš„ç‰ˆæœ¬)å‡ºä¾†ï¼Œæ‰å½¢æˆç¾åœ¨çš„ [Maplibre](https://github.com/maplibre/maplibre-gl-js)ã€‚

----

æœ‰é—œåœ°åœ–ç¹ªè£½çš„æ–‡ç« åˆ°é€™é‚Šåˆ°ä¸€æ®µè½äº†ï¼Œè¬è¬ä½ çš„é–±è®€ï¼Œæœ‰ä»»ä½•å•é¡Œè«‹è¯çµ¡æˆ‘ğŸ˜Š

import GisSeries from "../_gis-series.mdx";

<GisSeries />

